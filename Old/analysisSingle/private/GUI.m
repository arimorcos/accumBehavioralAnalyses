%GUI.m

%function to create the GUI for analysis single

function [guiObjects] = GUI()
    
    screens = get(0,'MonitorPositions');
    if size(screens,1) > 1
        scrn = screens(2,:);
    else
        scrn = screens(1,:);
    end
    
%     guiObjects.figHandle = figure('Name','Live ViRMEn Data','NumberTitle','Off','MenuBar','none');
guiObjects.figHandle = figure('Name','Live ViRMEn Data','NumberTitle','Off');
    set(guiObjects.figHandle,'OuterPosition',[scrn(1) scrn(2) 0.5*(scrn(3)-scrn(1)) scrn(4)]);
    
    guiObjects.table = uitable('FontName','Arial','FontSize',14,'RowStriping','on','BackgroundColor',...
            [1 1 1; 0.8 0.8 0.8],'Units','normalized','Position',[0 .2 1 .4]);
    
    guiObjects.update = uicontrol('FontName','Arial','FontSize',15,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
            'Position',[.05 .16 .25 .04],'String','Update Plot','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969]);
    
    %create listbox for modules
    guiObjects.moduleList = uicontrol('FontName','Arial','FontSize',12,'FontWeight','bold','ForegroundColor',[0 0 0],...
        'Units','Normalized','Position',[.05 .07 .25 .07],'Style','listbox','BackgroundColor',[1 1 1],...
        'String',{'Significance','Run Speed','Previous Trial Effect'},'HorizontalAlignment','Center');    
    
    %create button for running
    guiObjects.runModule = uicontrol('FontName','Arial','FontSize',15,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
            'Position',[.05 .02 .25 .04],'String','Run Module','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969]);    
        
    %set text entry for window size
    
    uicontrol('FontName','Arial','FontSize',15,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.32 0.135 0.18 0.02],'String','Window Size: ','Style','text','BackgroundColor',[0.7969 0.7969 0.7969]);
    guiObjects.winSize = uicontrol('FontName','Arial','FontSize',15,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.5 0.13 0.2 0.03],'String','5','Style','edit'); 
    
    guiObjects.winText = uicontrol('FontName','Arial','FontSize',20,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.1 0.775 0.8 0.05],'String','Calculating...','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],...
        'visible','off');
    
    %Create checkboxes
    uicontrol('FontName','Arial','FontSize',15,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.755 0.16 0.2 0.02],'String','Show?','Style','text','BackgroundColor',[0.7969 0.7969 0.7969]);
    uicontrol('FontName','Arial','FontSize',13,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.13 0.2 0.02],'String','Percent Correct:','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],'HorizontalAlignment','Left');
    uicontrol('FontName','Arial','FontSize',13,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.1 0.2 0.02],'String','Trials:','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],'HorizontalAlignment','Left');
    uicontrol('FontName','Arial','FontSize',13,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.07 0.2 0.02],'String','Left:','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],'HorizontalAlignment','Left');
    uicontrol('FontName','Arial','FontSize',13,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.04 0.2 0.02],'String','White:','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],'HorizontalAlignment','Left');
    uicontrol('FontName','Arial','FontSize',13,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.01 0.2 0.02],'String','Legend:','Style','text','BackgroundColor',[0.7969 0.7969 0.7969],'HorizontalAlignment','Left');
    
    guiObjects.percCorrCheck = uicontrol('Units','Normalized','Position',[0.97 0.1375 0.04 0.01],'style','checkbox',...
        'BackgroundColor',[0.7969 0.7969 0.7969],'Value',1);
    guiObjects.trialCheck = uicontrol('Units','Normalized','Position',[0.97 0.1075 0.04 0.01],'style','checkbox',...
        'BackgroundColor',[0.7969 0.7969 0.7969],'Value',1);
    guiObjects.leftCheck = uicontrol('Units','Normalized','Position',[0.97 0.0775 0.04 0.01],'style','checkbox',...
        'BackgroundColor',[0.7969 0.7969 0.7969],'Value',1);
    guiObjects.whiteCheck = uicontrol('Units','Normalized','Position',[0.97 0.0475 0.04 0.01],'style','checkbox',...
        'BackgroundColor',[0.7969 0.7969 0.7969],'Value',1);
    guiObjects.legendCheck = uicontrol('Units','Normalized','Position',[0.97 0.0175 0.04 0.01],'style','checkbox',...
        'BackgroundColor',[0.7969 0.7969 0.7969],'Value',0);
    
    guiObjects.nothingChecked = uicontrol('FontName','Arial','FontSize',20,'FontWeight','bold','ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.1 0.775 0.8 0.05],'String','Nothing Checked','Style','text','BackgroundColor',[1 1 1],...
        'visible','off');
    
    %set up date browser
    guiObjects.datePopup = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.74 0.97 0.2 0.02],'String','Date','Style','popupmenu');
    guiObjects.dateButtonRight = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.95 0.967 0.02 0.023],'String','>','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969],...
        'Callback',{@changeDate,guiObjects,1,1});
    guiObjects.dateButtonLeft = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.71 0.967 0.02 0.023],'String','<','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969],...
        'Callback',{@changeDate,guiObjects,0,1});
    
    %set up animal browser
    guiObjects.animalPopup = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.22 0.97 0.09 0.02],'String','Animal','Style','popupmenu');
    guiObjects.animalButtonRight = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.32 0.967 0.02 0.023],'String','>','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969],...
        'Callback',{@changeAnimal,guiObjects,1,1});
    guiObjects.animalButtonLeft = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.19 0.967 0.02 0.023],'String','<','Style','pushbutton','BackgroundColor',[0.7969 0.7969 0.7969],...
        'Callback',{@changeAnimal,guiObjects,0,1});
    guiObjects.mouseToggle = uicontrol('FontName','Arial','FontSize',13,'ForegroundColor',[0 0 0],'Units','Normalized',...
        'Position',[0.03 0.967 0.14 0.023],'String','Current','Style','togglebutton');
end